<!DOCTYPE html>
<html>
<head>
  <!-- <script src='http://localhost:8000/dist/shaka-player.compiled.debug.js'></script> -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/shaka-player/2.5.4/shaka-player.compiled.js'></script>
  <!--
    Mux.js is an independent library, unreleated to mux.com
    Mux.js is not required for DASH, but shaka-player might need it to play your HLS content. See:
    "Why doesn't my HLS content work?" in the FAQ https://github.com/google/shaka-player/blob/master/docs/tutorials/faq.md
  -->
  <script defer src="../node_modules/mux.js/dist/mux.js"></script>
</head>
<body>
  <div id='playerwrapper1'>
    <video id="video1"
           width="640"
           poster="//shaka-player-demo.appspot.com/assets/poster.jpg"
           controls></video>
  </div>

  <div id='playerwrapper2'>
    <video id="video2"
           width="640"
           poster="//shaka-player-demo.appspot.com/assets/poster.jpg"
           controls></video>
  </div>

  <script src='./shakaPlayer-mux.js'></script>
  <script>
    var manifestUri1 =
     'https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd';
    var manifestUri2 =
     'https://stream.mux.com/efCQY2RBifH3EcbdAVPEhFBcndJVkq23.m3u8';

    function initApp(id, manifestUri) {
      // Install built-in polyfills to patch browser incompatibilities.
      shaka.polyfill.installAll();

      // Check to see if the browser supports the basic APIs Shaka needs.
      if (shaka.Player.isBrowserSupported()) {
        // Everything looks good!
        initPlayer(id, manifestUri);
      } else {
        // This browser does not have the minimum set of APIs we need.
        console.error('Browser not supported!');
      }
    }

    function initPlayer(id, manifestUri) {
      // Create a Player instance.
      const video = document.getElementById(id);
      const player = new shaka.Player(video);
      window[`player_${id}`] = player;
      window[id] = video;
      const loadErrorHandler = initShakaPlayerMux(player, {
        debug: true,
        data: {
          env_key: 'YOUR_ENV_KEY',
          video_title: 'SAMPLE_TITLE'
        }
      });

      player.load(manifestUri).catch(function (error) {
        loadErrorHandler(error)
        //
        // Do your own custom error handling logic
        //
        //
      });
    }

    initApp('video1', manifestUri1);
    initApp('video2', manifestUri2);
  </script>
</body>
</html>
